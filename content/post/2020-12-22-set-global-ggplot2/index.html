---
title: How to globally set colour scales in ggplot2
author: Stefano Coretta
date: '2020-12-22'
slug: set-global-ggplot2
categories:
  - Methods
tags:
  - data viz
  - ggplot2
  - colours
  - rmd
  - rmarkdown
---

<script src="index_files/header-attrs/header-attrs.js"></script>


<p>After the post on using custom typefaces in ggplot2 (<a href="../custom-fonts-ggplot2">here</a>), this time Iâ€™ll briefly discuss how to set colour scales in ggplot2 globally in an <code>.Rmd</code> file.</p>
<p>The perk of setting scales globally is that you can set the colours once at the beginning of the <code>.Rmd</code> file and all the plots in the file will adhere to the specified scales without the need to repeat code.</p>
<div id="set-ggplot2-options" class="section level1">
<h1>Set ggplot2 options</h1>
<p>The most robust way of specifying global colour scales for ggplot2 plots is to set the appropriate ggplot2 options with <code>options()</code> at the beginning of the <code>.Rmd</code> file.
I generally do so in the <code>setup</code> chunk, where I also load the tidyverse/ggplot2 with <code>library(tidyverse)</code>.</p>
<p>The relevant options are:</p>
<ul>
<li><code>ggplot2.discrete.colour</code>: sets the colour scale for discrete aesthetics.</li>
<li><code>ggplot2.discrete.fill</code>: sets the fill scale for discrete aesthetics.</li>
<li><code>ggplot2.continuous.colour</code>: sets the colour scale for continuous aesthetics.</li>
<li><code>ggplot2.continuous.fill</code>: sets the fill scale for continuous aesthetics.</li>
</ul>
<p>All these options take a character vector of colour names/codes or a function that returns such a vector (for the full documentation see <a href="https://ggplot2.tidyverse.org/reference/scale_colour_discrete.html?q=discrete%20colour%20scales">here</a> and <a href="https://ggplot2.tidyverse.org/reference/scale_colour_continuous.html">here</a>).</p>
<p>For example:</p>
<pre class="r"><code># names
options(ggplot2.discrete.fill = c(&quot;red&quot;, &quot;blue&quot;, &quot;green&quot;, &quot;purple&quot;, &quot;yellow&quot;))

# hex codes
options(ggplot2.discrete.fill = c(&quot;#264653&quot;, &quot;#2a9d8f&quot;, &quot;#a8dadc&quot;, &quot;#457b9d&quot;, &quot;#e76f51&quot;))

# function
options(ggplot2.discrete.fill = RColorBrewer::brewer.pal(12, &quot;Set3&quot;))</code></pre>
<p>Note that the colours specified with <code>ggplot2.discrete.*</code> will be used only if there are as many colours in the vector/function output as the number of data levels, or more.
When the number of level exceeds the number of colours, ggplot2 falls back to <code>scale_colour_hue()/scale_fill_hue()</code> to construct the scale.</p>
<p>It is possible to define multiple palettes each with a different number of colours as a list of colour names/codes vectors, and ggplot2 will pick the palette with the minimum number of colours that exceeds the number of data levels.
See <a href="#interp"><strong>??</strong></a> and the third example <a href="https://ggplot2.tidyverse.org/reference/scale_colour_discrete.html">here</a>.</p>
</div>
<div id="colours-in-action" class="section level1">
<h1>Colours in action</h1>
<pre class="r"><code>library(tidyverse) # or library(ggplot2)</code></pre>
<div id="colour-name" class="section level2">
<h2>Colour name</h2>
<pre class="r"><code>options(ggplot2.discrete.fill = c(&quot;red&quot;, &quot;blue&quot;, &quot;green&quot;, &quot;purple&quot;, &quot;yellow&quot;))

mpg %&gt;%
  filter(!(class %in% c(&quot;subcompact&quot;, &quot;suv&quot;))) %&gt;%
  ggplot(aes(class, fill = class)) +
  geom_bar()</code></pre>
<p><img src="index_files/figure-html/name-1.png" width="672" /></p>
</div>
<div id="hex-value" class="section level2">
<h2>Hex value</h2>
<pre class="r"><code>options(ggplot2.discrete.fill = c(&quot;#264653&quot;, &quot;#2a9d8f&quot;, &quot;#a8dadc&quot;, &quot;#457b9d&quot;, &quot;#e76f51&quot;))

mpg %&gt;%
  filter(!(class %in% c(&quot;subcompact&quot;, &quot;suv&quot;))) %&gt;%
  ggplot(aes(class, fill = class)) +
  geom_bar()</code></pre>
<p><img src="index_files/figure-html/hex-1.png" width="672" /></p>
</div>
<div id="set3" class="section level2">
<h2>Set3</h2>
<pre class="r"><code>options(ggplot2.discrete.fill = RColorBrewer::brewer.pal(12, &quot;Set3&quot;))

mpg %&gt;%
  filter(!(class %in% c(&quot;subcompact&quot;, &quot;suv&quot;))) %&gt;%
  ggplot(aes(class, fill = class)) +
  geom_bar()</code></pre>
<p><img src="index_files/figure-html/set3-1.png" width="672" /></p>
</div>
<div id="interp" class="section level2">
<h2>Palette interpolation</h2>
<pre class="r"><code>default_palettes &lt;- list(
  # palette with 5 colours
  wesanderson::wes_palette(&quot;Darjeeling1&quot;),
  # same palette interpolated to 8 colours
  grDevices::colorRampPalette(wesanderson::wes_palette(&quot;Darjeeling1&quot;), alpha = TRUE)(8)
)

options(ggplot2.discrete.fill = default_palettes)

# 5 levels
ggplot(mpg, aes(class, fill = fl)) + geom_bar()</code></pre>
<p><img src="index_files/figure-html/ramp-1.png" width="672" /></p>
<pre class="r"><code># 7 levels
ggplot(mpg, aes(class, fill = class)) + geom_bar()</code></pre>
<p><img src="index_files/figure-html/ramp-2.png" width="672" /></p>
</div>
</div>
