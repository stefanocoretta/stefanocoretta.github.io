<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>rmd | Stefano Coretta</title>
    <link>https://stefanocoretta.github.io/tags/rmd/</link>
      <atom:link href="https://stefanocoretta.github.io/tags/rmd/index.xml" rel="self" type="application/rss+xml" />
    <description>rmd</description>
    <generator>Source Themes Academic (https://sourcethemes.com/academic/)</generator><language>en-uk</language><copyright>© 2017-2020 Stefano Coretta</copyright><lastBuildDate>Tue, 22 Dec 2020 00:00:00 +0000</lastBuildDate>
    <image>
      <url>img/map[gravatar:%!s(bool=false) shape:circle]</url>
      <title>rmd</title>
      <link>https://stefanocoretta.github.io/tags/rmd/</link>
    </image>
    
    <item>
      <title>How to globally set colour scales in ggplot2</title>
      <link>https://stefanocoretta.github.io/post/2020-12-22-set-global-ggplot2/</link>
      <pubDate>Tue, 22 Dec 2020 00:00:00 +0000</pubDate>
      <guid>https://stefanocoretta.github.io/post/2020-12-22-set-global-ggplot2/</guid>
      <description>
&lt;script src=&#34;https://stefanocoretta.github.io/rmarkdown-libs/header-attrs/header-attrs.js&#34;&gt;&lt;/script&gt;


&lt;p&gt;After the post on using custom typefaces in ggplot2 (&lt;a href=&#34;../custom-fonts-ggplot2&#34;&gt;here&lt;/a&gt;), this time I’ll briefly discuss how to set colour scales in ggplot2 globally in an &lt;code&gt;.Rmd&lt;/code&gt; file.&lt;/p&gt;
&lt;p&gt;The perk of setting scales globally is that you can set the colours once at the beginning of the &lt;code&gt;.Rmd&lt;/code&gt; file and all the plots in the file will adhere to the specified scales without the need to repeat code.&lt;/p&gt;
&lt;div id=&#34;set-ggplot2-options&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Set ggplot2 options&lt;/h2&gt;
&lt;p&gt;The most robust way of specifying global colour scales for ggplot2 plots is to set the appropriate ggplot2 options with &lt;code&gt;options()&lt;/code&gt; at the beginning of the &lt;code&gt;.Rmd&lt;/code&gt; file.
I generally do so in the &lt;code&gt;setup&lt;/code&gt; chunk, where I also load the tidyverse/ggplot2 with &lt;code&gt;library(tidyverse)&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;The relevant options are:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;ggplot2.discrete.colour&lt;/code&gt;: sets the colour scale for discrete aesthetics.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ggplot2.discrete.fill&lt;/code&gt;: sets the fill scale for discrete aesthetics.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ggplot2.continuous.colour&lt;/code&gt;: sets the colour scale for continuous aesthetics.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ggplot2.continuous.fill&lt;/code&gt;: sets the fill scale for continuous aesthetics.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;All these options take a character vector of colour names/codes or a function that returns such a vector (for the full documentation see &lt;a href=&#34;https://ggplot2.tidyverse.org/reference/scale_colour_discrete.html?q=discrete%20colour%20scales&#34;&gt;here&lt;/a&gt; and &lt;a href=&#34;https://ggplot2.tidyverse.org/reference/scale_colour_continuous.html&#34;&gt;here&lt;/a&gt;).&lt;/p&gt;
&lt;p&gt;For example:&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;# names
options(ggplot2.discrete.fill = c(&amp;quot;red&amp;quot;, &amp;quot;blue&amp;quot;, &amp;quot;green&amp;quot;, &amp;quot;purple&amp;quot;, &amp;quot;yellow&amp;quot;))

# hex codes
options(ggplot2.discrete.fill = c(&amp;quot;#264653&amp;quot;, &amp;quot;#2a9d8f&amp;quot;, &amp;quot;#a8dadc&amp;quot;, &amp;quot;#457b9d&amp;quot;, &amp;quot;#e76f51&amp;quot;))

# function
options(ggplot2.discrete.fill = RColorBrewer::brewer.pal(12, &amp;quot;Set3&amp;quot;))&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Note that the colours specified with &lt;code&gt;ggplot2.discrete.*&lt;/code&gt; will be used only if there are as many colours in the vector/function output as the number of data levels, or more.
When the number of level exceeds the number of colours, ggplot2 falls back to &lt;code&gt;scale_colour_hue()/scale_fill_hue()&lt;/code&gt; to construct the scale.&lt;/p&gt;
&lt;p&gt;It is possible to define multiple palettes each with a different number of colours as a list of colour names/codes vectors, and ggplot2 will pick the palette with the minimum number of colours that exceeds the number of data levels. See the third example &lt;a href=&#34;https://ggplot2.tidyverse.org/reference/scale_colour_discrete.html&#34;&gt;here&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div id=&#34;colours-in-action&#34; class=&#34;section level2&#34;&gt;
&lt;h2&gt;Colours in action&lt;/h2&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;library(tidyverse) # or library(ggplot2)&lt;/code&gt;&lt;/pre&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;options(ggplot2.discrete.fill = c(&amp;quot;red&amp;quot;, &amp;quot;blue&amp;quot;, &amp;quot;green&amp;quot;, &amp;quot;purple&amp;quot;, &amp;quot;yellow&amp;quot;))

mpg %&amp;gt;%
  filter(!(class %in% c(&amp;quot;subcompact&amp;quot;, &amp;quot;suv&amp;quot;))) %&amp;gt;%
  ggplot(aes(class, fill = class)) +
  geom_bar()&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;https://stefanocoretta.github.io/post/2020-12-22-set-global-ggplot2_files/figure-html/unnamed-chunk-1-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;options(ggplot2.discrete.fill = c(&amp;quot;#264653&amp;quot;, &amp;quot;#2a9d8f&amp;quot;, &amp;quot;#a8dadc&amp;quot;, &amp;quot;#457b9d&amp;quot;, &amp;quot;#e76f51&amp;quot;))

mpg %&amp;gt;%
  filter(!(class %in% c(&amp;quot;subcompact&amp;quot;, &amp;quot;suv&amp;quot;))) %&amp;gt;%
  ggplot(aes(class, fill = class)) +
  geom_bar()&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;https://stefanocoretta.github.io/post/2020-12-22-set-global-ggplot2_files/figure-html/unnamed-chunk-2-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;pre class=&#34;r&#34;&gt;&lt;code&gt;options(ggplot2.discrete.fill = RColorBrewer::brewer.pal(12, &amp;quot;Set3&amp;quot;))

mpg %&amp;gt;%
  filter(!(class %in% c(&amp;quot;subcompact&amp;quot;, &amp;quot;suv&amp;quot;))) %&amp;gt;%
  ggplot(aes(class, fill = class)) +
  geom_bar()&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;&lt;img src=&#34;https://stefanocoretta.github.io/post/2020-12-22-set-global-ggplot2_files/figure-html/unnamed-chunk-3-1.png&#34; width=&#34;672&#34; /&gt;&lt;/p&gt;
&lt;/div&gt;
</description>
    </item>
    
  </channel>
</rss>
